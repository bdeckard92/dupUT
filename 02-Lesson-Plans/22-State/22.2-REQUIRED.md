# Module 22 Virtual Class: State

## Overview

In today's virtual class, students will create a new context object for the global state, refactor the components to use the store, and practice reading the official documentation on Redux.

Students will also form their own project groups and go over the project requirements.

## Learning Objectives

By the end of class, students will be able to:

* Explain and use actions with a reducer function.

* Explain reducers and use them with the `useReducer` Hook.

## Instructor Notes

* Be sure to prepare and read over the activities before your class begins. Try to anticipate any questions students may have.

* During activities, visit a few breakout rooms and check if the group is having any problems using `00-practice-app` for their activities.

* **Important**: To avoid continuous NPM installs, all of today's activities' Solved and Unsolved folders include only a `src` folder. Similar to Module 20, use the provided web application [00-React-App](../../01-Class-Content/22-State/01-Activities/00-React-App) and swap out the `src` folder for each activity. It's recommended that you completely restart the dev server between activities.

* Implementing global state using React Context API was covered in Lesson 1.

* This week's Challenge is refactoring the `Shop-Shop` e-commerce platform that students worked on throughout this module to use Redux. They will need to read through the official documentation by themselves and find the right information to help them accomplish their task. The `05-Redux-Docs` activity is a sample of what they need to do in order to succeed in the challenge.

* Be prepared to go over the [project requirements](../../01-Class-Content/22-State/04-Supplemental/Project-Requirements.md).

## Office Hours

Encourage students to work on the remaining module algorithms during Office Hours. Review the algorithm solutions 5–10 minutes before class begins or during Office Hours after class.

## Time Tracker

| Start  | #   | Activity Name                            | Duration |
| ------ | --- | ---------------------------------------- | -------- |
| 6:30PM | 0   | Office Hours                             | 0:30     |
| 7:00PM | 1   | Introduction                             | 0:10     |
| 7:10PM | 2   | Review Current Challenge                 | 0:05     |
| 7:15PM | 3   | Instructor Demo: Reducers                | 0:05     |
| 7:20PM | 4   | Student Do: Reducers                     | 0:15     |
| 7:35PM | 5   | Instructor Review: Reducers              | 0:10     |
| 7:45PM | 6   | Instructor Demo: Actions                 | 0:05     |
| 7:50PM | 7   | Student Do: Actions                      | 0:15     |
| 8:05PM | 8   | Instructor Review: Actions               | 0:10     |
| 8:15PM | 9   | Instructor Demo: `useReducer` Hook       | 0:05     |
| 8:20PM | 10  | Student Do: `useReducer` Hook            | 0:20     |
| 8:40PM | 11  | Instructor Review: `useReducer` Hook     | 0:10     |
| 8:50PM | 12  | Recap & Promote Resources                | 0:05     |
| 8:55PM | 13  | Introduce Group Project                  | 0:05     |
| 9:00PM | 14  | End                                      | N/A      |

---

## Class Instructions

### 1. Introduction (10 min)

* Welcome students to class.

* Ask the class the following questions (☝️) and call on students for the answers (🙋):

  * ☝️ What did you learn this week? How would you explain it to your friends and family?

  * 🙋 We learned how to incorporate global state in our application so that we can avoid prop drilling. We learned how to create and utilize actions and reducers. We created a global store and incorporated indexedDB for offline capabilities. We even utilized Stripe API to process payments! We are moving fast compared to traditional learners. It’s okay to feel overwhelmed as long as you don’t give up.

  * ☝️ Did anyone have an "Aha!" or "Eureka!" moment this week? When was it and why did things suddenly click for you?

  * 🙋 Eureka moments happen when we try different approaches to a problem or change the way we're thinking about it.

  * ☝️ Did anyone feel stuck this week? How did you get unstuck?

  * 🙋 It's easy to get stuck when you're learning web development. It's important to learn how to get unstuck because it happens to the pros too. Rather than getting lost in search results, consult the tool's official documentation first. Then ask for help from instructional staff or your peers. Study groups are great because explaining your problems to someone else often reveals the solution.

### 2. Review Current Challenge (5 min)

* Navigate to `01-Class-Content/22-State/02-Challenge/Main` from the command line and run `npm start`.

  * We see the module project we've been working on throughout this module. But the difference here is that this application uses Redux to manage state instead of Context API.

  * The real challenge is to implement Redux by yourself by reading through the official documentation.

* Ask the class the following questions (☝️) and call on students for the answers (🙋):

  * ☝️ What recently acquired skills will help us build this challenge?

  * 🙋 The concept of global state and using actions and reducers to update the state is the same whether you use React Context API or Redux. So that knowledge of global state will help you with this challenge.

  * ☝️ How are these skills relevant to a career in web development?

  * 🙋 This last part of the boot camp has been focused more about being employer-ready than learning any new technologies or skills. We have been improving the skills you've already learned throughout this boot camp. But at a job, you will need not only coding skills but the ability to research, read documentation, and find the right information to solve your problem. That is the purpose of this challenge! To help you practice reading official documentation and use that knowledge to code.

  * ☝️ How will this challenge improve your portfolio?

  * 🙋 It will show your knowledge and ability to incorporate not only React Context API but also Redux to implement global state.

* Answer any questions before proceeding to the next activity.

### 3. Instructor Demo: Reducers (5 min)

* Open `03-Reducers/Solved` in your IDE and demonstrate the following:

  * 🔑 Today we will be using the provided [00-practice-app](../../01-Class-Content/22-State/01-Activities/00-practice-app) app for all of our activities.

  * 🔑 First, we copy the [src](../../01-Class-Content/22-State/01-Activities/03-Reducers/Solved/src) folder and paste it into the `00-practice-app` app inside the `client` folder.

  * 🔑 Then, we navigate to `00-practice-app` in our command line and run `npm install` to set up the app.

  * 🔑 Start the app in dev mode by running `npm start`. The app will open automatically in the browser at <http://localhost:3000>

  * 🔑 We can see that we are working with the same student list application, but this version includes a reducer function to handle the `students` state. The reducer hasn't been implemented into the front end logic just yet, but we do have some tests to run our code against.

  * 🔑 A reducer is a function that accepts state and an action and returns a new state object. Reducers also keep all of the actions that can be performed on the state object in one place within our code.

* Press `control + C` to stop the app, and then run `npm run test` from the command line to show that there are tests included with this activity.

  * When we run the tests, we can see there is a new file for `reducers.test.js` in the `03-Reducers/` folder:
  
    ```bash
     PASS  src/__tests__/reducers.test.js
    PASS  src/__tests__/app.test.js

    Test Suites: 2 passed, 2 total
    Tests:       3 passed, 3 total
    Snapshots:   0 total
    Time:        1.9 s
    Ran all test suites related to changed files.
    ```

  * 🔑 We can see that the tests pass, but that is because this is the solved version. In the upcoming activity, you will be diagnosing and fixing an issue with the reducer function that causes the unsolved version to fail.

* Ask the class the following questions (☝️) and call on students for the answers (🙋):

  * ☝️ Where have we used this before?

  * 🙋 We use Context API to create the global state for the `Shop-Shop` app in Lesson 1.

  * ☝️ How does this activity equip us for the challenge?

  * 🙋 We will need to understand the concept and functionality of a global state in order to use Redux for the challenge. The syntax will be different but the concept will be the same.

  * ☝️ How would we build this?

  * 🙋 We need to create a `GlobalState.js` and a custom React Hook in order to instantiate and use the global state object.

* Answer any questions before proceeding to the next activity.

### 4. Student Do: Reducers  (15 min)

* Direct students to the activity instructions found in `03-Reducers/README.md`.

* Break your students into pairs that will work together on this activity.

  ```md
  # 🐛 Reducer Fails to Add/Remove Students

  Work with a partner to resolve the following issue(s):

  * As a developer, I want to implement reducers into my application to update global state.

  * As a developer, I want to be able to diagnose and fix the issue associated with the reducer that is causing the tests to fail.
    
  ## Expected Behavior

  When the tests are run, all of them should pass.

  ## Actual Behavior

  The suite that tests the reducer is failing for adding and removing student functionality.

  ## Steps to Reproduce the Problem

  1. Navigate to the `Unsolved/` folder and run `npm install`.

  2. Run `npm run test`.

  3. Note that the test fails.

  ---

  ## 💡 Hints

  How does the test's error message inform us about where the error is occurring?

  How can we use `switch` statements to an advantage in this activity?

  ## 🏆 Bonus

  If you have completed this activity, work through the following challenge with your partner to further your knowledge:

  * Where have we seen the term **reduce** elsewhere in JavaScript?

  Use [Google](https://www.google.com) or another search engine to research this.
  ```

* While breaking everyone into groups, be sure to remind students and the rest of the instructional staff that questions on Slack or otherwise are welcome and will be handled. It's a good way for your team to prioritize students who need extra help.

### 5. Instructor Review: Reducers (10 min)

* Ask the class the following questions (☝️) and call on students for the answers (🙋):

  * ☝️ How comfortable do you feel with reducers? (Poll via Fist to Five, Slack, or Zoom)

* Assure students that we will cover the solution to help solidify their understanding. If questions remain, remind them to use office hours to get extra help!

* Use the prompts and talking points (🔑) below to review the following key points:

  * ✔️ Arguments passed to `reducer`

  * ✔️ Pure functions

* First, run `npm run test` in the command-line window to demonstrate that the tests are currently failing.
  
  * Reiterate to students that the goal of this activity is to write code in the `reducers.js` file that would allow the tests to pass.

* Open `src/utils/StudentContext.js` in your IDE and explain the following:

  * The application hasn't implemented the reducer yet and is still using methods inside the `StudentContext`.
  
  * The idea is to extract that functionality into a single reducer function. Let's look at those methods to see what we need to include in the reducer function:

    ```js
    const addStudent = (student) => {
      const id = students.length + 1;

      const newStudent = { ...student, id };

      setStudents([...students, newStudent]);
    };

    const removeStudent = (id) => {
      const newStudentsList = [
        ...students.filter((student) => student.id !== id),
      ];

      setStudents(newStudentsList);
    };
    ```

  * Now that we know we need the reducer to handle adding and removal of students, let's navigate to `reducers.js` and create the `reducer`.

* Open `src/utils/reducers.js` in your IDE and explain the following:

  * First we import the action variables from `actions.js` into the file:

    ```js
    import { ADD_STUDENT, REMOVE_STUDENT } from './actions';
    ```

  * Then we set up the reducer function, which accepts `state` and an `action`:

    ```js
    export default function reducer(state, action) { ... }
    ```

  * The first action, `ADD_STUDENT`,  returns a new copy of state with an updated `students` array.
  
  * We populate the `students` array with existing students using the spread operator, and we add the new student from the `payload` property of the `action` object:

    ```js
    switch (action.type) {
      case ADD_STUDENT:
        return {
          ...state,
          students: [...state.students, action.payload],
        };
    ...
    };
    ```

  * The other action to account for is `REMOVE_STUDENT`, which also returns a new copy of state with an updated `students` array.
  
  * First we populate the `students` array with existing students, as long as they don't have the `id` that was included in `action.payload`:

    ```js
    case REMOVE_STUDENT:
      return {
        ...state,
        students: [...state.students].filter(
          (student) => student.id !== action.payload
        ),
      };
    ```

  * Finally we add a `default` case, which will prevent the application from breaking if we happen to pass an invalid `action` to the reducer:

    ```js
      switch (action.type) {
        ...

      default:
        return state;
    }
    ```

  * 🔑 Remember that, while the tests are now passing, this activity only involves setting up the reducer. Later we will connect the application to the reducer.

* Ask the class the following questions (☝️) and call on students for the answers (🙋):

  * ☝️ Why is it important to keep the original state intact when working with reducer functions?

  * 🙋 This allows the reducer to be a pure function and keeps the state that we pass to the reducer intact.

  * ☝️ What can we do if we don't completely understand this?

  * 🙋 We can refer to supplemental material, read the [Redux Docs on reducers](https://redux.js.org/faq/reducers/), and stay for office hours to ask for help.

* Answer any questions before proceeding to the next activity.

### 6. Instructor Demo: Actions  (5 min)

* Open `04-Global-State-Refactor/Solved` in your IDE and demonstrate the following:

  * 🔑 Again, we will need to copy the `src` folder and replace the `src` folder from the last activity in the `00-practice-app` app with this one.

  * 🔑 Navigate to [01-Activities/00-practice-app](../00-practice-app) and start the app in dev mode by running `npm start` from your command line.

  * 🔑 Check out the application running on <http://localhost:3000> in the browser. Everything should work as before, but now it is using the global store!

  * 🔑 In the last activity, we set up the global store, so in this activity we will refactor the components to use it. When we are done, the app should work like before but this time using a global store!

* Ask the class the following questions (☝️) and call on students for the answers (🙋):

  * ☝️ Where have we used this before?

  * 🙋 We incorporated a global store and refactored the components to use it in Lesson 1.

  * ☝️ How does this activity equip us for the challenge?

  * 🙋 The whole challenge is about refactoring an application to use a certain technology. We are practicing that now by refactoring a working application to use a global store. After we are done, it should function the same but more efficiently.

  * ☝️ How would we build this?

  * 🙋 We will need to check the application to see where the prop drilling is happening. Then we will replace all traces of the prop drilling with the global store we just created.

* Answer any questions before proceeding to the next activity.

### 7. Student Do: Actions (15 min)

* Divide students into breakout rooms.

* Direct students to the activity instructions found in `04-Global-State-Refactor/README.md`.

```md
# Global State Refactor

In this activity, you will refactor the components to read state data from the store and dispatch updates to it. 

## Instructions

* **Note** You will be using one web application, [00-practice-app](../00-practice-app), for all of our activities today.

* Copy the [src](Unsolved/src) folder and paste it into the `00-practice-app` app inside the [client](../00-practice-app/client) folder. 

* Take a moment to think about which components need to access the global state. Look at [App.js](../00-practice-app/client/src/App.js) to see where the prop drilling is happening.

* Open [Header.js](../00-practice-app/client/src/components/Header.js) and update the code to use global state. Use the comments to guide you.

* Open [Detail.js](../00-practice-app/client/src/pages/Detail.js) and update the code to use the global state. Use the comments to guide you.

  * For the `useEffect` Hook, the return statement has been provided for you.
  
  * Once the `data` is returned from the `useQuery()` but before there is a `currentBook` set, execute the `dispatch()` function to trigger the `UPDATE_BOOKS` action with the books from the `data`. 

  * Once the books have been loaded, `currentBook` will have a value of a book. That should then trigger the `UPDATE_CURRENT_BOOK` action with the `currentBook`.

* Open [App.js](../00-practice-app/client/src/App.js) and remove the prop drilling.

* Navigate to [01-Activities/00-practice-app](../00-practice-app) and start the app in dev mode by running `npm start` from your command line.

* Check out the application running on <http://localhost:3000> in your browser. Everything should work as before, but now using global state!

* Press `CTRL + C` to stop the server before moving on to the next activity.

## Hint(s)

* Check out [BookList.js](../00-practice-app/client/src/pages/BookList.js) for an example of refactoring already done for you.

* You can refer to the [React Docs on useEffect](https://reactjs.org/docs/hooks-effect.html#tip-optimizing-performance-by-skipping-effects)
```

### 8. Instructor Review: Actions  (10 min)

* Bring students back from breakout rooms.

* Use the prompts and talking points below to review the following key (🔑) points:

  * ✔️ `Header.js`

  * ✔️ `Detail.js`

  * ✔️ `App.js`

* Open `04-Global-State-Refactor/Unsolved/src/App.js` in your IDE and explain the following:

  * If we take a look at the `App.js` file in the `Unsolved` folder (before the refactoring), the `Header` component uses the `currentBook` but `setCurrentBook` happens in the `Detail` component. Therefore, the state is stored in `App.js` at the top level, and in order to access and update the state in these different components, they are passed in as props. This is called 'prop drilling'.  

    ```js
    function App() {
        const [currentBook, setCurrentBook] = useState('');

        return (
            <Header currentBook={currentBook} />

            <Detail setCurrentBook={setCurrentBook} currentBook={currentBook} />
        )
    }
    ```

* Open `04-Global-State-Refactor/Solved/src/components/Header.js` in your IDE and explain the following:

  * 🔑 Starting with the `Header` component, we first need to import the `useStoreContext()` Hook in order to access our global store.

    ```js
    import { useStoreContext } from '../utils/GlobalState';
    ```

  * Then we retrieve the current state from the global state using the `useStoreContext()` Hook.

    ```js
    const [state] = useStoreContext();
    ```

  * Lastly, we remove all traces of prop drilling. So we no longer need to bring in `currentBook` as a prop and we no longer access the book title through it.

    ```js
    const Header = () => {
        <h3>Now Viewing: {state.currentBook.title || 'Your book list'}</h3>
    }
    ```

* Open `04-Global-State-Refactor/Solved/src/pages/Detail.js` in your IDE and explain the following:

  * 🔑 Refactoring `Detail` component was probably quite the challenge. Let's go over it now. First, we need to import the `useStoreContext()` Hook here as well, along with the two actions.

    ```js
    import { useStoreContext } from '../utils/GlobalState';
    import { UPDATE_BOOKS, UPDATE_CURRENT_BOOK } from '../utils/actions';
    ```

  * Next, we need to use the `useStoreContext()` Hook to retrieve the current state and use the `dispatch()` method to update the state as needed.

    ```js
    const [state, dispatch] = useStoreContext();
    ```

  * We need to refactor the `useQuery` Hook slightly.

    ```js
    const { loading, data } = useQuery(QUERY_BOOKS);
    ```

  * Instead of getting the book's id inside of the `useEffect` Hook, we will grab it once we get the books in the global state.

    ```js
    const currentBook = state.books.find(({ _id }) => _id === bookId);
    ```

  * Now the `useEffect` Hook had to be refactored quite a bit. Once the `useQuery` gets the books from the server, we use that to update the global state.

    ```js
    useEffect(() => {
      if (data && !currentBook) {
        dispatch({
          type: UPDATE_BOOKS,
          books: data.books
        });
    ```

  * Once the books are in the global store, then we can get the `currentBook` using the `bookId` from the params. Once that's set, we use that to update the the global state.

    ```js
    } else if (currentBook) {
      dispatch({
        type: UPDATE_CURRENT_BOOK,
        currentBook
      });
    }
    ```

  * The return statement of the `useEffect` Hook was given to you. Basically, when the user leaves the page and goes back to the `BookList`, we need to empty out the `currentBook` in the global state so that the `Header` will revert to saying "Your book list" instead of the book's title.

    ```js
    return () => {
      dispatch({
          type: UPDATE_CURRENT_BOOK,
          currentBook: {}
        });
      };
    }, [loading, currentBook, dispatch, data]);
    ```

  * Finally, we need to remove all traces of prop drilling that happened.

    ```js
    const Detail = () => {
    ```

* Open `04-Global-State-Refactor/Unsolved/src/App.js` in your IDE again and explain the following:

  * Back at `App.js`, we need to remove all traces of prop drilling here since we don't need it anymore!

    ```js
    function App() {
      return (
        <Header />
          <Route exact path="/book/:bookId" component={Detail} />
      );
    }
    ```

* Ask the class the following questions (☝️) and call on students for the answers (🙋):

  * ☝️ If we wanted to check on our progress in refactoring the components and using the global store, what could we have done?

  * 🙋 We can add a `console.log(state)` in the `StoreProvider()` in the `GlobalState.js` file. That will show us what is in the global state whenever it is accessed.

  * ☝️ What can you do if you don't completely understand this?

  * 🙋 We can refer to Lesson 1, read the [React Docs on useEffect](https://reactjs.org/docs/hooks-effect.html#tip-optimizing-performance-by-skipping-effects), and stick around for office hours to ask for help.

* Answer any questions before proceeding to the next activity.

### 9. Instructor Demo: `useReducer` Hook  (5 min)

* This activity has two parts to it. Students will practice reading official documentation and then use what they learned to code. The purpose of this activity is to instill in them the skill of researching and finding the right answers in official documentation to solve their problem. That is also what this week's Challenge is about.

* Open <https://redux.js.org> in your browser and explain the following:

  * 🔑 Developers are problem solvers. We need to be able to research and apply what we learned to our current problems and find solutions. This activity will give us a taste of that.

  * 🔑 We will first examine the [Redux Documentation](https://redux.js.org/) to find the answers to specific questions outlined in the [README](../../01-Class-Content/22-State/01-Activities/05-Redux-Docs/README.md).

  * 🔑 We will then apply what we found out about the Redux store and refactor our `00-practice-app` app to use it.

* Open `05-Redux-Docs/Solved` in your IDE and demonstrate the following:

  * 🔑 Again, we will need to copy the `src` folder and replace the `src` folder from the last activity in the `00-practice-app` app with this one.

  * 🔑 Navigate to [01-Activities/00-practice-app](../00-practice-app) and start the app in dev mode by running `npm start` from your command line.

  * 🔑 When we checkout the application running in the browser, we can see the initial Redux store printed on the screen.

  * 🔑 This activity is lengthy so don't worry if you can't finish Part 2. This is just a preview of what your Challenge will be like.

* Ask the class the following questions (☝️) and call on students for the answers (🙋):

  * ☝️ Where have we used this before?

  * 🙋 Throughout this boot camp, we have been introduced to many new technologies and tools that were not covered in-depth in our curriculum for the sake of time. However, we have been given resources like the official documentations for these technologies which we can use on our own to learn more about them and use them.

  * ☝️ How does this activity equip us for the challenge?

  * 🙋 The challenge is all about reading official documentation and using that knowledge to refactor an existing, functioning application.

  * ☝️ How would we build this?

  * 🙋 First we need to read the `useReducer` Hook and then we will implement the Redux store in our application.

* Answer any questions before proceeding to the next activity.

### 10. Student Do: `useReducer` Hook (20 min)

* Divide students into breakout rooms.

* Direct students to the activity instructions found in `05-Redux-Docs/README.md`.

```md
# Redux Documentation

In this activity, you will read through the official Redux documentation to not only learn about Redux, but also practice reading official documentation and implementing what you learned to your code. 

## Instructions

**Part 1**

* Work with your group to answer each of the following questions using the [Redux Documentation](https://redux.js.org/).

  1. When should you use Redux?

  2. How do you create a store in Redux?

  3. How are reducers in Redux different from reducers in Context API?

  4. How do you connect the Redux store to React?

  5. What were some similarities between Redux and React Context API?

**Part 2**

* **Note** You will be using one web application, [00-practice-app](../00-practice-app), for all of our activities today.

* Copy the [src](Unsolved/src) folder and paste it into the `00-practice-app` app inside the [client](../00-practice-app/client) folder. 

* Using what you read about Redux, create a Redux [store](../00-practice-app/client/src/utils/store.js) and refactor [reducers.js](../00-practice-app/client/src/utils/reducers.js) and [App.js](../00-practice-app/client/src/App.js) to use the Redux store.

* Navigate to [01-Activities/00-practice-app](../00-practice-app) and start the app in dev mode by running `npm start` from your command line.

* Check out the application running on <http://localhost:3000> in your browser and you should see the store with the initial state on the page.

* Press `CTRL + C` to stop the server.

## Hint(s)

* Check out "Getting Started with Redux" and the "Basic Tutorial" in the `useReducer` Hook to guide you through the activity. 

* Don't worry if you can't finish Part 2. This activity is a preview of what you will do on your Challenge.
```

### 11. Instructor Review: `useReducer` Hook  (10 min)

* Bring students back from breakout rooms.

* Use the prompts and talking points below to review the following key (🔑) points:

  * ✔️ Redux questions

  * ✔️ Redux store

  * ✔️ `reducers.js`

  * ✔️ `App.js`

* Open `05-Redux-Docs/README.md` in your IDE. Ask the class the following questions (☝️) and call on students for the answers (🙋):

  * ☝️ When should you use Redux? <https://redux.js.org/introduction/getting-started#should-you-use-redux>

  * 🙋 Since there are pros and cons to using Redux, it is advised that we use Redux when:

    * We have large amounts of state that are needed in many places in the application

    * The app state is updated frequently over time

    * The logic to update that state may be complex

    * The app has a large codebase and might be worked on by many people

  * ☝️ How do you create a store in Redux? <https://redux.js.org/basics/store>

  * 🙋 We use `createStore()` and it requires a reducer argument.

  * ☝️ How are reducers in Redux different from reducers in React Context API? <https://redux.js.org/basics/reducers>

  * 🙋 They're not much different at all! Context API uses the `useReducer` Hook. In Redux, we create the `initialState` in the reducer file for the reducer to use. But there are no major differences.

  * ☝️ How do you connect the Redux store to React? <https://redux.js.org/basics/usage-with-react>

  * 🙋 We can use the `connect()` function with `mapStateToProps` and `mapDispatchToProps`. We also wrap all of the components in `<Provider>` to make the store available to them all.

  * ☝️ What were some similarities between Redux and React Context API?

  * 🙋 They both use actions, reducers, store, and provider to work with global state.

* Open `05-Redux-Docs/Solved/src/utils/store.js` in your IDE and explain the following:

  * 🔑 To create a Redux store, we need to use `createStore` from Redux. We also need to import the reducer. Remember to export the store!

    ```js
    import { createStore } from 'redux';
    import reducer from './reducers';

    export default createStore(reducer);
    ```

* Open `05-Redux-Docs/Solved/src/utils/reducers.js` in your IDE and explain the following:

  * 🔑 Next we need to refactor the reducer to be used by Redux. First we remove all traces of `useReducer`.

  * Then we create the `initialState` to be used by the reducer.

    ```js
    const initialState = {
      books: [],
      currentBook: {}
    };
    ```

  * The only change to our actual reducer function is to incorporate the `initialState`

    ```js
    export const reducer = (state = initialState, action) => {}
    ```

  * On the bottom, there is no need for the `useBookReducer` function anymore. Simply export the reducer function.

    ```js
    export default reducer;
    ```

* Open `05-Redux-Docs/Solved/src/App.js` in your IDE and explain the following:

  * 🔑 Lastly, the `App.js` has been simplified for our activity purposes. We import the Redux store and replace the `StoreProvider` with `Provider` from `react-redux`.

    ```js
    import { Provider } from 'react-redux';
    import store from './utils/store';
    function App() {
      return (
        <div className="m-5">
        <Provider store={store}>
            <h4>Here is the initialState:</h4>
            <div className="container">{JSON.stringify(store.getState())}</div>
        </Provider>
        </div>
      );
    }
    ```

* Ask the class the following questions (☝️) and call on students for the answers (🙋):

  * ☝️ What are the three core principles that Redux is built upon?

  * 🙋 Single source of truth. The global state of your app is stored in an object tree within a single store.

  * 🙋  State is read-only. The only way to change the state is to emit an action.

  * 🙋  Changes are made with pure functions. To specify how the state is transformed by actions, you write pure reducers. We can’t directly manipulate state but we can overwrite it with a new version.

  * ☝️ What can you do if you don't completely understand this?

  * 🙋 We can refer to [Redux Documentation](https://redux.js.org/), research online for additional libraries to use Redux with React, and stick around for office hours to ask for help.

* Answer any questions before proceeding to the next activity.

### 12. Recap & Promote Additional Resources (5 min)

* Ask the class the following questions (☝️) and call on students for the answers (🙋):

  * ☝️ What do you think you absolutely need to know to succeed at the challenge?

  * 🙋 We must know how to search for information that will help us implement Redux in our application, whether that be the official Redux documentation or other resources.

  * ☝️ What do you think is okay to not completely understand?

  * 🙋 All of it! The field of web development is very wide and rapidly evolving. Unless you choose to specialize, it is not necessary to know any one area completely to be successful.

  * ☝️ Why is it important to do as much of the lesson material prior to class as possible?

  * 🙋 It's important both to be fully prepared to start the challenge and because it will prepare you for your future career as a web developer. We cover a lot of material in the boot camp. Lessons are intentionally designed to give each topic an optimal amount of depth and scope so that you have a solid foundation to build upon in future lessons. The skills you learn in the lessons are cutting-edge, real-world skills that you will use in your career as a full-stack web developer.

* Direct students to the additional resources available to them:

  * Reflection and Retrieval

  * Career Connection

  * Dessert Menu

### 13. Introduce Group Project (5 min)

* Announce the project groups.

  * This time, students will form the groups themselves. Keep them groups of 3-4. Help form the project groups for students who are having some trouble finding groups to join.

  * Encourage the groups to set up a time this weekend to brainstorm project ideas.

  * Project ideas will be approved by the instructor by next week's first virtual class in Module 23.

* Go over project requirements.

  * Add the [project requirements](../../01-Class-Content/22-State/04-Supplemental/Project-Requirements.md) to the student-facing repo and go over them briefly.

```md
# Project Requirements

* Use React for the front end.

* Use GraphQL with a Node.js and Express.js server.

* Use MongoDB and the Mongoose ODM for the database.

* Use queries and mutations for retrieving, adding, updating, and deleting data.

* Be deployed using Heroku (with data).

* Meet the minimum requirements of a PWA:
 
  * Uses a web manifest

  * Uses a service worker for offline functionality

  * Is installable

* Have a polished UI.

* Be responsive.

* Be interactive (i.e., accept and respond to user input).

* Include authentication (JWT).

* Protect sensitive API key information on the server.

* Have a clean repository that meets quality coding standards (file structure, naming conventions, best practices for class and id naming conventions, indentation, high-quality comments, etc.).

* Have a high-quality README (with unique name, description, technologies used, screenshot, and link to deployed application).

Finally, you must add your project to the portfolio that you created in Module 20.

**More details about the project will be provided in the lessons for Module 23 in Canvas.**
```

* Let the students know detailed project information will be given in the async material for Module 23.

### 14. End

How did today’s lesson go? Your feedback is important. Please take 5 minutes to complete [this anonymous survey](https://forms.gle/3LozVjherGH83aG17).

---
© 2021 Trilogy Education Services, LLC, a 2U, Inc. brand. Confidential and Proprietary. All Rights Reserved.
