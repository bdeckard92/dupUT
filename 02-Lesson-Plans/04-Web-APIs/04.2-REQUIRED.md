# Module 04 Virtual Class: Web APIs

## Overview

In today's virtual class, students will review timers, data attributes, and `localStorage`.

## Learning Objectives

By the end of class students will be able to:

* Implement and explain timers and callbacks

* Store information on HTML elements by using data attributes.

* Store values in `localStorage`

## Instructor Notes

* Be sure to prepare and read over the activities before your class begins. Try to anticipate questions students may have.

* In the module project, students will work with `localStorage` in Lesson 4 when they add persistence to their to-do list. They also worked with it lightly in Module 03, so they should have a general idea of how to use it.

* Students do not use timers in the module project, so this is the most important topic to convey today. They will need to use timers for the module Challenge.

* During activities, visit a few breakout rooms quietly and ask the group if they are comfortable with the activity and provide gentle tips to keep them on track.

* If you are comfortable doing so, live code the solutions to the activities. If not, no worries. Use the solutions provided and follow the prompts and talking points for review.

## Office Hours

Encourage students to work on the remaining module algorithms during Office Hours. Review the algorithm solutions 5â€“10 minutes before class begins or during Office Hours after class.

## Time Tracker

| Start  | #   | Activity Name                       | Duration |
| ------ | --- | ----------------------------------- | -------- |
| 6:30PM | 0   | Office Hours                        | 0:30     |
| 7:00PM | 1   | Introduction                        | 0:10     |
| 7:10PM | 2   | Review Current Challenge            | 0:05     |
| 7:15PM | 3   | Instructor Demo: Timers/Intervals   | 0:05     |
| 7:20PM | 4   | Student Do: Timers/Intervals        | 0:15     |
| 7:35PM | 5   | Instructor Review: Timers/Intervals | 0:10     |
| 7:45PM | 6   | Instructor Demo: Data Attributes    | 0:05     |
| 7:50PM | 7   | Student Do: Data Attributes         | 0:15     |
| 8:05PM | 8   | Instructor Review: Data Attributes  | 0:10     |
| 8:15PM | 9   | Instructor Demo: localStorage       | 0:05     |
| 8:20PM | 10  | Student Do: localStorage            | 0:20     |
| 8:40PM | 11  | Instructor Review: localStorage     | 0:10     |
| 8:50PM | 12  | Recap & Promote Resources           | 0:05     |
| 8:55PM | 13  | Introduce Upcoming Challenge        | 0:05     |
| 9:00PM | 14  | End                                 | N/A      |

---

## Class Instructions

### 1. Introduction (10 min)

* Welcome students to class.

* Ask the class the following questions (â˜ï¸) and call on students for the answers (ğŸ™‹):

  * â˜ï¸ What did you learn this week? How would you explain it to your friends and family?

  * ğŸ™‹ We learned about web APIs using `window` and the Document Object Model. We are moving fast compared to traditional learners. Itâ€™s okay to feel overwhelmed as long as you donâ€™t give up.

  * â˜ï¸ Did anyone have an "Aha!" or "Eureka!" moment this week? When was it and why did things suddenly click for you?

  * ğŸ™‹ Eureka moments happen when we try different approaches to a problem or change the way we're thinking about it.

  * â˜ï¸ Did anyone feel stuck this week? How did you get unstuck?

  * ğŸ™‹ It's easy to get stuck when you're learning web development. It's important to learn how to get unstuck because it happens to the pros too. Rather than getting lost in search results, consult the tool's official documentation first. Then ask for help from instructional staff or your peers. Study groups are great because explaining your problems to someone else often reveals the solution.

### 2. Review Current Challenge (5 min)

* Open `02-Challenge/Main/index.html` in your browser and demonstrate the following:

  * This week's Challenge is a coding quiz.

  * When we click 'Start Quiz', we are presented with a series of multiple choice questions.

  * Starting the quiz also starts a timer in the upper right corner.

  * When all questions are answered or time runs out, we are presented with our final score and a field to enter our initials.

  * If we enter our initials, we will see them in listed on `/highscore.html`. If we close and reopen the browser or refresh the application, our high score persists.

* Ask the class the following questions (â˜ï¸) and call on students for the answers (ğŸ™‹):

  * â˜ï¸ What recently acquired skills will help us build this challenge?

  * ğŸ™‹ Web APIs, specifically DOM methods and browser storage.

  * â˜ï¸ How are these skills relevant to a career in web development?

  * ğŸ™‹ Web APIs are fundamental to web development.

  * â˜ï¸ How will this challenge improve your portfolio?

  * ğŸ™‹ Not only is this challenge a coding quiz, it will showcase understanding web APIs, browser storage and timers.

* Answer any questions before proceeding to the next activity.

### 3. Instructor Demo: Timers/Intervals (5 min)

* Open `03-Timers-Intervals/Solved/index.html` in your browser and demonstrate the following:

  * ğŸ”‘ When we visit the page, we see a countdown of how many seconds are remaining.

  * ğŸ”‘ Once it hits 0, a message is shown on the screen one word at a time.

* Ask the class the following questions (â˜ï¸) and call on students for the answers (ğŸ™‹):

  * â˜ï¸ Where have we used this before?

  * ğŸ™‹ Although we didn't cover timers in our lessons, it will be included in this week's Challenge, so this will be a good opportunity to practice.

  * â˜ï¸ How does this activity equip us for the challenge?

  * ğŸ™‹ The challenge uses a countdown. We will need to know how to update the DOM with timers.

  * â˜ï¸ How would we build this?

  * ğŸ™‹ We will use `setInterval()` to repeatedly call a function with a fixed time delay between each call. We will also use `clearInterval()` to cancel the timed, repeating action which was previously established by a call to `setInterval()`.

* Answer any questions before proceeding to the next activity.

### 4. Student Do: Timers/Intervals (15 min)

* Divide students into breakout rooms.

* Direct students to the activity instructions found in `03-Timers-Intervals/README.md`.

  ````md
  # ğŸ“– Create a Speed-Reader

  Work with a partner to implement the following user story:

  * As a developer, I want to create a speed-reading application that prints a single word of a message at a time.

  ## Acceptance Criteria

  * It's done when the number of seconds left on the countdown is printed on the screen.

  * It's done when, after the countdown of 5 seconds ends, the words of the message appear on the screen, one word at a time.

  ## ğŸ“ Notes

  Refer to the documentation:

  [MDN Documentation on setInterval](https://developer.mozilla.org/en-US/docs/Web/API/WindowOrWorkerGlobalScope/setInterval)

  [MDN Documentation on clearInterval](https://developer.mozilla.org/en-US/docs/Web/API/WindowOrWorkerGlobalScope/clearInterval)

  ## Assets

  The following animation demonstrates the web application's appearance and functionality:

  ![A countdown of 5 seconds begins and then single words appear on the screen.](./images/demo1.gif)

  ## ğŸ’¡ Hints

  How is `displayMessage()` utilizing the `setInterval()` and `clearInterval()` methods to display the words at an interval of 1000 milliseconds?

  ## ğŸ† Bonus

  If you have completed this activity, work through the following challenge with your partner to further your knowledge:

  * What `window` method is used to delay an action for a set number of milliseconds? Why might this method be useful?

  Use [Google](https://www.google.com) or another search engine to research this.
  ````

### 5. Instructor Review: Timers/Intervals  (10 min)

* Bring students back from breakout rooms.

* Use the prompts and talking points below to review the following key (ğŸ”‘) points:

  * âœ”ï¸ `setInterval()`

  * âœ”ï¸ `clearInterval()`

* Open `03-Timers-Intervals/Solved/assets/js/script.js` in your IDE and explain the following:

  * We first use `getElementById()` to select the HTML elements with "countdown", "main", "start" IDs.

    ```js
    var timerEl = document.getElementById('countdown');
    var mainEl = document.getElementById('main');
    ```

  * We then declare a `message` variable with a string of text. We then use the `.split()` method to _split_ the string into individual elements in an array, `words`.

    ```js
    var message =
      'Some say the world will end in ğŸ”¥, Some say in ice. From what Iâ€™ve tasted of desire, I hold with those who favor fire. But if it had to perish twice, I think I know enough of hate. To say that for destruction ice, Is also great, And would suffice.';
    var words = message.split(' ');
    ```

  * We declare a `countdown()` function. Within our `countdown()` function, we declare a `timeLeft` variable and set it to 5.

    ```js
    function countdown() {
      var timeLeft = 5;

    ...
    ```

  * ğŸ”‘ We then declare `timeInterval` and assign it the value of `setInterval()`. `setInterval()` is a `window` method that repeatedly calls a function, or _callback_, based on a value, or _interval_, passed to it.

  * ğŸ”‘ Here, we will update the text in `timerEl` at an interval of 1000 ms, or 1 second. With each interval, we _decrement_ the value of `timeLeft`. If `timeLeft` is equal to 0, we use `clearInterval()` to stop `timeInterval()`.

    ```js
    var timeInterval = setInterval(function() {
      if (timeLeft > 1) {
        timerEl.textContent = timeLeft + ' seconds remaining';
        timeLeft--;
      } else if (timeLeft === 1) {
        timerEl.textContent = timeLeft + ' second remaining';
        timeLeft--;
      } else {
        timerEl.textContent = '';
        clearInterval(timeInterval);
        displayMessage();
      }
    }, 1000);
    ```

  * To briefly explain the `displayMessage()` function, we declare a variable called `wordCount`

    ```js
    function displayMessage() {
      var wordCount = 0;
    ```

  * We then declare a `msgInterval` variable and, as above, assign it the value of `setInterval()`. Within our callback, we check if our `words` array contains anything. If not, we clear the interval.

  * Otherwise, we update the `textContent` of `mainEl` with the string at `words[wordCount]`. With each interval, we increment `wordCount`. Each interval is set to the length of 300 milliseconds.

    ```js
    var msgInterval = setInterval(function() {
      if (words[wordCount] === undefined) {
        clearInterval(msgInterval);
      } else {
        mainEl.textContent = words[wordCount];
        wordCount++;
      }
    }, 300);
    ```

* Ask the class the following questions (â˜ï¸) and call on students for the answers (ğŸ™‹):

  * â˜ï¸ Why do we need to call `clearInterval()`?

  * ğŸ™‹ If we don't call `clearInterval()`, our timer, `setInterval()`, will run indefinitely.

  * â˜ï¸ What can you do if you don't completely understand this?

  * ğŸ™‹ We can refer to the lesson plan, read the MDN Web Docs on [setInterval()](https://developer.mozilla.org/en-US/docs/Web/API/WindowOrWorkerGlobalScope/setInterval) and [clearInterval()](https://developer.mozilla.org/en-US/docs/Web/API/WindowOrWorkerGlobalScope/clearInterval), and stick around for Office Hours to ask for help.

* Answer any questions before proceeding to the next activity.

### 6. Instructor Demo: Data Attributes  (5 min)

* Open `04-Data-Attributes/Solved/index.html` in your browser and demonstrate the following:

  * When opening the application, we are presented with grid with boxes.

  * ğŸ”‘ If we click a box, we see the hidden number rendered in the box.

  * ğŸ”‘ If we click the box again, or reload the page, the boxes become hidden again.

  * This is done by storing data associated with an HTML element in a `data` attribute.

* Ask the class the following questions (â˜ï¸) and call on students for the answers (ğŸ™‹):

  * â˜ï¸ How do we store information in an HTML element?

  * ğŸ™‹ We use a data attribute, and we start the attribute name with `data-`.

  * â˜ï¸ What are data attributes used for?

  * ğŸ™‹ Data attributes are a way to store additional information associated with vanilla HTML.

  * â˜ï¸ How would we access the data-attribute in JavaScript??

  * ğŸ™‹ We would first access the element using `document.querySelector()`, assign it to a variable. Once we have that variable, we can access the data-attribute on the `dataset` property using dot notation.

* Answer any questions before proceeding to the next activity.

### 7. Student Do: Data Attributes  (15 min)

* Divide students into breakout rooms.

* Direct students to the activity instructions found in `04-Data-Attributes/README.md`.

  ```md
  # ğŸ—ï¸ Use Data Attributes to Display Hidden Number

  Work with a partner to implement the following user story:

  * As a player, I want to click on a card and view the hidden number.

  ## Acceptance Criteria

  * It's done when I click on a card and the hidden number is revealed.

  * It's done when the number is visible if the card is clicked.

  ## Assets

  The following image demonstrates the web application's appearance and functionality:

  ![Six cards appear in a grid, with the numbers 1, 3, and 5 displayed on three of the cards while the remaining three appear blank.](./images/01-screenshot.png)

  ---

  ## ğŸ’¡ Hints

  How can we use the `dataset` object to access an element's data attributes?

  ## ğŸ† Bonus

  If you have completed this activity, work through the following challenge with your partner to further your knowledge:

  * We have learned `getAttribute()` and `setAttribute()`. What other methods can you use to access an element's attributes?

  Use [Google](https://www.google.com) or another search engine to research this.
  ```

### 8. Instructor Review: Data Attributes  (10 min)

* Ask the class the following questions (â˜ï¸) and call on students for the answers (ğŸ™‹):

  * â˜ï¸ How comfortable do you feel with data attributes? (Poll via Fist to Five, Slack, or Zoom)

* Assure students that we will cover the solution to help solidify their understanding. If questions remain, remind them to use office hours to get extra help!

* Use the prompts and talking points (ğŸ”‘) below to review the following key points:

  * âœ”ï¸ `getAttribute()`

  * âœ”ï¸ `dataset`

  * âœ”ï¸ `setAttribute()`

* Open `04-Data-Attributes/Solved/assets/js/script.js` in your IDE and explain the following:

  * ğŸ”‘ We use `getAttribute()` to store the value of the clicked element's `data-state` attribute in a variable, as shown in the following example:

    ```js
    var state = element.getAttribute("data-state");
    ```

  * ğŸ”‘ If the state is `hidden`, we use the `dataset` object to set the text content to the number, as shown in the following example:

    ```js
    element.textContent = element.dataset.number;
    ```

  * ğŸ”‘ We also use the `dataset` object to set the value of state to be `visible`, because the number is now visible to the user. See the following code for an example:

    ```js
    element.dataset.state = "visible";
    ```

  * If the state is `visible`, we empty the text content so that the number is removed, as follows:

    ```js
    element.textContent= "";
    ```

  * ğŸ”‘ We also set the state's value to `hidden` using the `setAttribute()` method, because the user can't see the number. See the following code for an example:

    ```js
    element.setAttribute("data-state", "hidden")
    ```

* Ask the class the following questions (â˜ï¸) and call on students for the answers (ğŸ™‹):

  * â˜ï¸ What are two ways that we can get values stored in data attributes?

  * ğŸ™‹ We can use the `getAttribute()` method or the `dataset` property.

  * â˜ï¸ What can we do if we don't completely understand this?

  * ğŸ™‹ We can refer to supplemental material, read the [MDN Web Docs on using data attributes](https://developer.mozilla.org/en-US/docs/Learn/HTML/Howto/Use_data_attributes), and stick around for office hours to ask for help.

* Answer any questions before ending the class.

### 9. Instructor Demo: localStorage  (5 min)

* Open `05-Local-Storage/index.html` in your browser and demonstrate the following:

  * When we open the page, we are presented with a log in form.

  * Once we enter in our name, email and choose a password we can click "Sign Up".

  * After filling out the form, open the developer console in the browser.

  * ğŸ”‘ Click on the "application" tab and then the "storage" tab and look for "local storage". You will notice a new object inside our local storage contain the information we entered in the form.

* Ask the class the following questions (â˜ï¸) and call on students for the answers (ğŸ™‹):

  * â˜ï¸ Where have we used this before?

  * ğŸ™‹ We used this to accomplish saving our todo list in Lesson 4.

  * â˜ï¸ How does this activity equip us for the challenge?

  * ğŸ™‹ The challenge uses browser storage to store high scores.

  * â˜ï¸ How would we build this?

  * ğŸ™‹ We would first scaffold our HTML and set up form fields for 'Email' and 'Password'. We would then write JavaScript to listen for a click event on our form and render the values in the DOM.

* Answer any questions before proceeding to the next activity.

### 10. Student Do: localStorage  (20 min)

* Divide students into breakout rooms.

* Direct students to the activity instructions found in `05-Local-Storage/README.md`.

  ```md
  # ğŸ› Object Not Saving as String Using localStorage

  Work with a partner to implement the following user story:

  * As a developer, I want to save the information from a form as an object using `localStorage`.

  ## Expected Behavior

  When a user clicks the Sign Up button the form's current values are stored in a object as a string using `localStorage`.

  ## Actual Behavior

  When a user clicks the Sign Up button the form's current values are not stored in `localStorage`.

  ## Steps to Reproduce the Problem

  1. Open `index.html` in your browser.

  2. Enter data in the form field and click the Save button.

  3. Navigate to Google Dev Tool's Application tab and note that no data has been saved as a string in `localStorage`.

  ## Assets

  The following image demonstrates the web application's appearance and functionality:

  ![Image showing data inputted in form and saved as a string LocalStorage.](./assets/image_1.png)

  ---
  ## ğŸ’¡ Hints

  What JSON method can you use to return a string?

  ## ğŸ† Bonus

  If you have completed this activity, work through the following challenge with your partner to further your knowledge:

  * What is JSON? How is it useful for sending and storing data?

  Use [Google](https://www.google.com) or another search engine to research this.
  ```

### 11. Instructor Review: localStorage  (10 min)

* Bring students back from breakout rooms.

* Use the prompts and talking points below to review the following key (ğŸ”‘) points:

  * âœ”ï¸ `localStorage.setItem()`

  * âœ”ï¸ `JSON.stringify()`

* Open `05-Local-Storage/Solved/index.html` in your IDE and explain the following:

  * The HTML form is set up with two fields for "email" and "password" and a button to "sign-up". Note the form method is `POST`.

  ```html
  <form method="POST">
    <div class="input-group">
      <label for="first-name">First Name</label>
      <input type="text" name="first-name" id="first-name" placeholder="Jane" />
    </div>
    <div class="input-group">
      <label for="last-name">Last Name</label>
      <input type="text" name="last-name" id="last-name" placeholder="Doe" />
    </div>
    <div class="input-group">
      <label for="email">Email</label>
      <input type="text" name="email" id="email" placeholder="janedoe@mail.com" />
    </div>
    <div class="input-group">
      <label for="password">Password</label>
      <input type="password" name="password" id="password" placeholder="supersecure123" />
    </div>
    <div id="msg"></div>
      <button id="sign-up">Sign Up</button>
  </form>
  ```

* Open `05-Local-Storage/Solved/assets/js/script.js` in your IDE and explain the following:

  * We use `querySelector()` to select our DOM elements and assign them to variables.

  ```js
  var firstNameInput = document.querySelector("#first-name");
  var lastNameInput = document.querySelector("#last-name");
  var emailInput = document.querySelector("#email");
  var passwordInput = document.querySelector("#password");
  var signUpButton = document.querySelector("#sign-up");
  ```

  * We use `addEventListener()` on our `signUpButton` and listen for a "click" event. If there is a click event, we prevent the default functionality of the form, which is to `POST` the form content to a server.

  ```js
  signUpButton.addEventListener('click', function(event) {
    event.preventDefault();
  ```

  * When the button is clicked, an object called `user` is created using the data entered in the form's fields.

  ```js
  var user = {
    firstName: firstNameInput.value.trim(),
    lastName: lastNameInput.value.trim(),
    email: emailInput.value.trim(),
    password: passwordInput.value.trim()
  };
  ```

  * We can then set the item to `localStorage` using the `setItem()` method. To save the object as a string we use `JSON.stringify()`.

  ```js
  localStorage.setItem("user", JSON.stringify(user));
  ```

* Ask the class the following questions (â˜ï¸) and call on students for the answers (ğŸ™‹):

  * â˜ï¸ Where _is_ `localStorage`?

  * ğŸ™‹ Values stored in `localStorage` are stored _locally_, in the users browser.

  * â˜ï¸ What can you do if you don't completely understanding this?

  * ğŸ™‹ We can refer to the lesson plan, read the [MDN Web Docs on localStorage](https://developer.mozilla.org/en-US/docs/Web/API/Window/localStorage), and stick around for Office Hours to ask for help.

* Answer any questions before proceeding to the next activity.

### 12. Recap & Promote Additional Resources (5 min)

* Ask the class the following questions (â˜ï¸) and call on students for the answers (ğŸ™‹):

  * â˜ï¸ What do you think you absolutely need to know to succeed at the challenge?

  * ğŸ™‹ To succeed at the challenge, we need to know how to create elements in the DOM, handle events, and implement timers.

  * â˜ï¸ What do you think is okay to not completely understand?

  * ğŸ™‹ All of it! The field of web development is very wide and rapidly evolving. Unless you choose to specialize, it is not necessary to know any one area completely to be successful.

  * â˜ï¸ Why is it important to do as much of the lesson material prior to class as possible?

  * ğŸ™‹ It's important both to be fully prepared to start the challenge and because it will prepare you for your future career as a web developer. We cover a lot of material in the boot camp. Lessons are intentionally designed to give each topic an optimal amount of depth and scope so that you have a solid foundation to build upon in future lessons. The skills you learn in the lessons are cutting-edge, real-world skills that you will use in your career as a full-stack web developer.

* Direct students to the additional resources available to them:

  * Reflection and Retrieval

  * Career Connection

  * Dessert Menu

### 13. Introduce Upcoming Challenge (5 min)

* Open `01-Class-Content/05-Third-Party-APIs/02-Challenge/Main/index.html` in your browser and demonstrate the following:

  * In the next challenge, we will be building a 'Work Day Scheduler'.

  * The scheduler is composed of fields for the hours from 9AM to 5PM. We can enter values into the fields and if we click the 'Save' icon next to the field, the value will be stored in `localStorage`.

  * Note that hours in the past are rendered as gray, the current hour is highlighted in red, and upcoming hours are green.

* Ask the class the following questions (â˜ï¸) and call on students for the answers (ğŸ™‹):

  * â˜ï¸ What are we learning?

  * ğŸ™‹ We are learning to work with third-party APIs. We'll be using Moment.js for working with time in the browser, as well as Bootstrap and jQuery to speed up our CSS and JavaScript development.

  * â˜ï¸ How does this project build off or extend previously learned material?

  * ğŸ™‹ We will need an understanding of HTML, CSS and JavaScript to build this project.

  * â˜ï¸ How does this project relate to your career goals?

  * ğŸ™‹ Managing time and dates is a constant challenge for developers. CSS frameworks are widely used in development and Bootstrap is the most popular. While jQuery is less popular than it was ten years ago, it is still used widely in legacy code bases.

* Answer any questions before proceeding to the next activity.

### 14. End

How did todayâ€™s lesson go? Your feedback is important. Please take 5 minutes to complete [this anonymous survey](https://forms.gle/3LozVjherGH83aG17).

---
Â© 2021 Trilogy Education Services, LLC, a 2U, Inc. brand.  Confidential and Proprietary.  All Rights Reserved.
