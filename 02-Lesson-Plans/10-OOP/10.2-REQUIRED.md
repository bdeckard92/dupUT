# Module 10 Virtual Class: Object-Oriented Programming (OOP)

## Overview 

In today's virtual class, students will review mocking and classes. .

## Learning Objectives

By the end of class, students will be able to:

* Test functionality with mock data

* Implement classes to create new instances of objects

* Implement multiple classes with different purposes to practice the OOP paradigm


## Instructor Notes 

* Be sure to prepare and read over the activities before your class begins. Try and anticipate questions students may have.

* During activities, visit a few breakout rooms quietly and ask the group if they are comfortable with the activity and provide gentle tips to keep them on track.

* If you are comfortable doing so, live code the solutions to the activities. If not, no worries. Use the solutions provided and follow the prompts and talking points for review. 

* If you see your students struggle with the activities or get frustrated, encourage them and let them know these are hard topics to understand and that they are learning a new way to approach and develop code. With time and practice, it will get easier and will make them employer-competitive! If you are comfortable doing so, share your own struggle and/or personal experiences learning and working with OOP.

* The [MDN Web Docs on classes](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Classes) provides a great review the basic components of classes. 

* Mocks are taught in Lesson 2 and ES6 Classes are taught in Lesson 5. TDD is introduced in Lesson 1 and used through the whole module. 

## Office Hours

Encourage students to work on the remaining module algorithms during office hours. Review the algorithm solutions 5â€“10 minutes before class begins or during office hours after class.

## Time Tracker 

| Start  | #   | Activity Name                      | Duration |
| ------ | --- | -----------------------------      | -------- |
| 6:30PM | 0   | Office Hours                       | 0:30     |
| 7:00PM | 1   | Introduction                       | 0:10     |
| 7:10PM | 2   | Review Current Challenge           | 0:05     |
| 7:15PM | 3   | Instructor Demo: First Mock        | 0:05     |
| 7:20PM | 4   | Student Do: First Mock             | 0:15     |
| 7:35PM | 5   | Instructor Review: First Mock      | 0:10     |
| 7:45PM | 6   | Instructor Demo: Classes           | 0:05     |
| 7:50PM | 7   | Student Do: Classes                | 0:15     |
| 8:05PM | 8   | Instructor Review: Classes         | 0:10     |
| 8:15PM | 9   | Instructor Demo: Multiple Classes  | 0:05     |
| 8:20PM | 10  | Student Do: Multiple Classes       | 0:20     |
| 8:40PM | 11  | Instructor Review: Multiple Classes| 0:10     |
| 8:50PM | 12  | Recap & Promote Resources          | 0:05     |
| 8:55PM | 13  | Introduce Upcoming Challenge       | 0:05     |
| 9:00PM | 14  | End                                | N/A      |
---

## Class Instructions

### 1. Introduction (10 min)

* Welcome students to class.

* Ask the class the following questions (â˜ï¸) and call on students for the answers (ğŸ™‹):

  * â˜ï¸ What did you learn this week? How would you explain it to your friends and family?

  * ğŸ™‹ We learned about Object-Oriented Programming (OOP). We used constructors, classes, prototypes, and Jest for TDD. We are moving fast compared to traditional learners. Itâ€™s okay to feel overwhelmed as long as you donâ€™t give up.

  * â˜ï¸ Did anyone have an "Aha!" or "Eureka!" moment this week? When was it and why did things suddenly click for you? 

  * ğŸ™‹ Eureka moments happen when we try different approaches to a problem or change the way we're thinking about it.

  * â˜ï¸ Did anyone feel stuck this week? How did you get unstuck?

  * ğŸ™‹ It's easy to get stuck when you're learning web development. It's important to learn how to get unstuck because it happens to the pros too. Rather than getting lost in search results, consult the tool's official documentation first. Then ask for help from instructional staff or your peers. Study groups are great because explaining your problems to someone else often reveals the solution. 


### 2. Review Current Challenge (5 min)

* Navigate to `02-Challenge/Main` in your command line and run `node app.js` to demonstrate the following: 

    * This challenge is to build a Node CLI that takes in information about employees and generates an HTML webpage that displays summaries for each person.

    * The application prompts the user for information about the team manager and then information about the team members. 
    
    * When the user has completed building the team, the application will create an HTML file that displays a nicely formatted team roster based on the information provided by the user.

* Ask the class the following questions (â˜ï¸) and call on students for the answers (ğŸ™‹):

    * â˜ï¸ What recently acquired skills will help us build this challenge?

    * ğŸ™‹ Jest for unit testing, ES6 Classes and `inquirer` for collecting input from the user will all be used to build this challenge.

    * â˜ï¸ How are these skills relevant to a career in web development?

    * ğŸ™‹ Since many employers will require programming in TDD, knowing how to write good unit tests will be crucial to your career. 

    * â˜ï¸ How will this challenge improve your portfolio?

    * ğŸ™‹ It will demonstrate a firm understanding of Node.js fundamentals as well as ES6 and unit testing.

* Answer any questions before proceeding to the next activity.


### 3. Instructor Demo: First Mock (5 min) 

* Navigate to `03-First-Mock/Solved/` in your command line and run `node index.js` to demonstrate the following:

    * ğŸ”‘ When we run `node index.js`, we see a printout of the names and ages of children at day care. The names change after certain identified events such as a child being picked up from day care. 

      ```js
      [
        Child { name: 'Amir', age: 3 },
        Child { name: 'Zhang Wei', age: 1 },
        Child { name: 'Kyle', age: 2 }
      ]

      At capacity, unable to add more children
      [
        Child { name: 'Amir', age: 3 },
        Child { name: 'Zhang Wei', age: 1 },
        Child { name: 'Kyle', age: 2 }
      ]

      Picked up Amir from day care
      [ Child { name: 'Zhang Wei', age: 1 }, Child { name: 'Kyle', age: 2 } ]

      [
        Child { name: 'Zhang Wei', age: 1 },
        Child { name: 'Kyle', age: 2 },
        Child { name: 'Rosie', age: 1 }
      ]

      Picked up Zhang Wei from day care
      Unable to add child, they are over the age limit
      [ Child { name: 'Kyle', age: 2 }, Child { name: 'Rosie', age: 1 } ]
      ```

    * Using Jest, we can spy on the functionality of these console logs.

* Navigate to `03-First-Mock/Solved/test/dayCare.test.js` in your IDE to demonstrate the following:

    * ğŸ”‘ We add Jest's `spyOn()` method to our test to mock and track the `console.log` method. 

      ```js
      const mock = jest.spyOn(console, "log");
      ```

    * ğŸ”‘ We then use the `mock.mockImplementation()` method to temporarily wrap the functionality of `console.log()` with an empty function that does nothing, as follows:

      ```js
      mock.mockImplementation(() => { });
      ```

    * ğŸ”‘ Next, we use the `expect()` method to expect the console.log to be called and for it to return a message in the log. Because we are mocking the `console.log()` method, nothing will be printed to the console when the test is run, and we can spy on values provided to the `console.log()`. 

      ```js
       expect(mock).toBeCalledWith(
        "Unable to add child, they are over the age limit"
      );
      ```

    * ğŸ”‘ Finally, after we run our test to spy on our console.log functionality, we want to restore our original functionality. To do so, we use the `mockRestore` method. 

      ```js
       mock.mockRestore();
      ``` 

* Ask the class the following questions (â˜ï¸) and call on students for the answers (ğŸ™‹):

    * â˜ï¸ Where have we used this before?

    * ğŸ™‹ We used mocks in Lesson 2. Mocking is part of Test Driven Development and another way we can use to gain insight on our code's behavior to help us write more durable code. 

    * â˜ï¸ How does this activity equip us for the challenge?

    * ğŸ™‹ When we use the `spyOn` method, we have a way to track existing functions and the behavior of our code. This is a useful feature that we can to test the functionality of our Challenge code. 

    * â˜ï¸ How would we build this?

    * ğŸ™‹ We use Jest's `spyOn` method to track functionality, like a `console.log` in our code. 

* Answer any questions before proceeding to the next activity.


### 4. Student Do: First Mock (15 min) 

* Divide students into breakout rooms.

* Direct students to the activity instructions found in `03-First-Mock/README.md`.

  ```md
   # ğŸ› Running npm run test Results in Errors

  Work with a partner to resolve the following issues:

  * As a developer, I want the tests for `dayCare.test.js` to pass when I run `npm install` and `npm run test` in the console.

  ## Expected Behavior

  * When we run `npm run test` in the console, we should not receive an error.

  * When we run `npm run test` in the console, the tests for `dayCare.test.js` should be passing.

  ## Actual Behavior

  * When we run `npm run test` in the console, we receive the following error: `"Cannot spyOn on a primitive value; undefined given"`.

  * When we run `npm run test` in the console, the tests for `dayCare.test.js` are not passing.

  ## Steps to Reproduce the Problem

  1. Navigate to the `Unsolved` folder in this activity.

  2. Run `npm install` in your console.

  3. Run `npm run test` in your console.

  ## Assets

  The following image demonstrates the web application's appearance and functionality:

  ![The console indicates that the test suites and tests have passed, with no messages or errors displayed.](./images/image.png)

  ---

  ## ğŸ’¡ Hints

  What does the error tell you about what is missing, and how do we capture the value of `console.log`?

  ## ğŸ† Bonus

  If you have completed this activity, work through the following challenge with your partner to further your knowledge:

  * What are two or three other methods that can be used in conjunction with `spyOn`?

  Use the [Jest API documentation on spyOn()](https://jestjs.io/docs/en/jest-object#jestspyonobject-methodname) to research this.

  ```

### 5. Instructor Review: First Mock (10 min) 

* Bring students back from breakout rooms. 

* Use the prompts and talking points (ğŸ”‘) below to review the following key points:

  * âœ”ï¸ `jest.spyOn()`

  * âœ”ï¸ `mock.mockImplementation()`

* Open `03-First-Mock/Solved/test/dayCare.test.js` in your IDE and explain the following: 

  * ğŸ”‘ Using `jest.spyOn()`, we pass in the arguments `console` and `"log"` to spy on the `console.log()` method. 
  
  * ğŸ”‘ We pass in an empty function to `mock.mockImplementation()` to replace the functionality of the `console.log()` method.

  * Now we can use `expect(mock).toBeCalledWith()` to verify that it was called with the arguments that we expect, as shown in the following example:

    ```js
    const mock = jest.spyOn(console, "log");
    mock.mockImplementation(() => {});

    dayCare.addChild(child);

    expect(dayCare.children.length).toEqual(0);
    expect(mock).toBeCalledWith(
      "Unable to add child, they are over the age limit"
    );
    ```

  * We will clean up any mocks we run at the end of a test to ensure that the next test is not affected. We can "unmock" `console.log()` by using the `mock.mockRestore()` method, as shown in the following example: 

    ```js
    mock.mockRestore();
    ```
* Ask the class the following questions (â˜ï¸) and call on students for the answers (ğŸ™‹):

    * â˜ï¸ What can we use mocks for? 

    * ğŸ™‹ We can use mocks to replace code with side effects, like printing to the console, making `fetch()` requests, and reading or writing to the file system&mdash;so that these things do not happen when tests are being run.

    * â˜ï¸ What can you do if you don't completely understand this?

    * ğŸ™‹ We can refer to Lesson 2, read the [Jest API documentation on spyOn()](https://jestjs.io/docs/en/jest-object#jestspyonobject-methodname), and stick around for office hours to ask for help.

* Answer any questions before proceeding to the next activity.


### 6. Instructor Demo: Classes  (5 min) 

* Navigate to `04-Classes/Solved/` in your command line and run `node rpg-classes.js` to demonstrate the following:

    * ğŸ”‘ We see a similar output as the previous activity. However, instead of constructor functions, this one uses ES6 Classes.

* Ask the class the following questions (â˜ï¸) and call on students for the answers (ğŸ™‹):

    * â˜ï¸ Where have we used this before?

    * ğŸ™‹ We used ES6 Classes in Lesson 5 when we converted the constructor functions, like `Potion()` and `Player()`, to ES6 Classes.

    * â˜ï¸ How does this activity equip us for the challenge?

    * ğŸ™‹ The challenge utilizes ES6 Classes for the `Employee`, `Manager`, `Engineer`, and `Intern`.

    * â˜ï¸ How would we build this?

    * ğŸ™‹ We will simply take our code from the previous activity and rewrite them using ES6 Class syntax. 

* Answer any questions before proceeding to the next activity.


### 7. Student Do: Classes  (15 min) 

* Divide students into breakout rooms.

* Direct students to the activity instructions found in `04-RPG-Classes/README.md`.

```md
# RPG Classes

In this activity, you will change the constructor function and prototype methods from the previous `RPG-Prototypes` activity into ES6 Classes. 

## Instructions

* Copy your code from [rpg-prototypes.js](../03-RPG-Prototypes/Unsolved/rpg-prototypes.js) and paste it into [rpg-classes.js](Unsolved/rpg-classes.js)

* Convert the constructor function, including the prototype methods, to ES6 Classes.

* Create two new instances of a `Character`, giving them different names, strength, and hitpoints. 

* Call a combination of `printStats()`, `attack()`, and `isAlive()` methods to have the two characters "fight" in your console.
```

### 8. Instructor Review: Classes  (10 min) 

* Bring students back from breakout rooms. 

* Use the prompts and talking points below to review the following key (ğŸ”‘) points:

  * âœ”ï¸ Convert the constructor

  * âœ”ï¸ Convert the prototype methods
  
  * âœ”ï¸ Create new instances of `Character`

* Open `04-RPG-Classes/Solved/rpg-classes.js` in your IDE and explain the following: 

  * ğŸ”‘ Convert the constructor function into a class.

  ```js
  class Character {
    constructor(name, strength, hitpoints) {
      this.name = name;
      this.strength = strength;
      this.hitpoints = hitpoints;
    }
  }  
  ```

  * ğŸ”‘ Inside the class brackets, the prototype methods are converted into class syntax also. 

  ```js
  printStats() {
    console.log("Name: " + this.name + "\nStrength: " + this.strength + "\nHitPoints: " + this.hitpoints);
    console.log("\n-------------\n");
  }

  isAlive() {
    if (this.hitpoints > 0) {
      console.log(this.name + " is still alive!");
      console.log("\n-------------\n");
    } else {
      console.log(this.name + " has died!");
    }
  }

  attack(opponent) {
    opponent.hitpoints -= this.strength;
    console.log(this.name + " attacked " + opponent.name + "!!")
    console.log("\n-------------\n");
  }
  ```

  * Notice, none of the actual code changed! Everything should function the same, only the syntax has changed.

  * ğŸ”‘ Therefore, when we create two new characters and make them fight in our console, everything should work as it did in the previous activity. 

  ```js
  let yogi = new Character("Dhalsim", 20, 65);
  let mutant = new Character("Blanka", 30, 50);

  yogi.printStats();
  mutant.printStats();

  mutant.attack(yogi);
  yogi.printStats();
  yogi.isAlive();

  yogi.attack(mutant);
  mutant.printStats();
  mutant.isAlive();
  ```

* Ask the class the following questions (â˜ï¸) and call on students for the answers (ğŸ™‹):

    * â˜ï¸ What are some differences between constructor functions and classes?

    * ğŸ™‹ ES6 classes must be called with the `new` keyword. With ES5 constructors, you could call `Character()` on its own. The other difference is that ES6 classes are not hoisted. 

    * â˜ï¸ What can you do if you don't completely understanding this?

    * ğŸ™‹ We can refer to Lesson 5, read the [MDN docs on Classes](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Classes), and stick around for office hours to ask for help.

* Answer any questions before proceeding to the next activity.

### 9. Instructor Demo: TDD  (5 min) 

* TDD is about the process of writing tests prior to writing code. But for our activity purposes, we are simply going to practice writing tests for the `RPG-Prototypes` activity we did earlier. 

* Navigate to `05-RPG-TDD/Solved` in your command line and run `npm install`. Run `node index.js` to demonstrate the following:

    * ğŸ”‘ This is the `RPG-Prototypes` activity we did earlier.

* Run `npm test` to demonstrate the following:

    * ğŸ”‘ All of the tests are passing

* Ask the class the following questions (â˜ï¸) and call on students for the answers (ğŸ™‹):

    * â˜ï¸ Where have we used this before?

    * ğŸ™‹ We've been using TDD since Lesson 1 when we created tests for the `Potion()` constructor. 

    * â˜ï¸ How does this activity equip us for the challenge?

    * ğŸ™‹ Since mocking isn't included in the challenge, this activity will focus only on writing tests for constructor functions without worrying about ES6 Classes.

    * â˜ï¸ How would we build this?

    * ğŸ™‹ We need to write tests outlining the expected functionality of creating new characters using the `Character` constructor

* Answer any questions before proceeding to the next activity.


### 10. Student Do: TDD  (20 min) 

* Divide students into breakout rooms.

* Direct students to the activity instructions found in `05-RPG-TDD/README.md`.

    ```md
    # RPG TDD

    In this activity, you will write tests outlining the expected functionality for the RPG game we created in the first activity `RPG-Prototypes`.

    ## Instructions

    * Navigate to [Unsolved/](Unsolved/) in your command line and run `npm install`.

    * Open the [Unsolved/rpg-tdd.js](Unsolved/rpg-tdd.js) file and take a moment to examine the code.
      
      * It is the `Character` constructor function from our first RPG activity. 

    * Now open the [Unsolved/test/rpg-tdd.test.js](Unsolved/test/rpg-tdd.test.js) file.

      * This file contains a `test` block for the `Character` constructor.

    * Write code for the `test` block with the following:

      * Create a new character instance with a `name`, `strength`, and `hitpoints` for our testing purposes.

      * Create a test that checks if the `name` is a `string`

      * Create a test that checks if the `strength` and `hitpoints` are `numbers`

      * Create a test that checks if the `hitpoints` is greater than the `strength`

    * To check if everything was done correctly, run `npm test` in your command line. All tests should be passing!

    ## Hint(s)

    * You may need to consult [the Jest documentation](https://jestjs.io/docs/en/using-matchers) for the appropriate matchers and its usage.  

    ## Bonus

    * Write a test that will check whether the character is alive or not, i.e. the `isAlive()` method.
    ```

### 11. Instructor Review: TDD  (10 min) 

* Bring students back from breakout rooms. 

* Use the prompts and talking points below to review the following key (ğŸ”‘) points:

    * âœ”ï¸ Create a new character

    * âœ”ï¸ Check if `name` is a string

    * âœ”ï¸ Check if `strength` and `hitpoints` are numbers

    * âœ”ï¸ Check if `hitpoints` is greater than `strength`

    * âœ”ï¸ Check if character is alive

* Open `05-RPG-TDD/Solved/test/rpg-tdd.test.js` in your IDE and explain the following: 

    * ğŸ”‘ We first create a character for our testing purposes.

    ```js
    const yogi = new Character("Dhalsim", 20, 65);
    ```

    * ğŸ”‘ Next, we check if the `name` is a string.

    ```js
    expect(yogi.name).toEqual(expect.any(String))
    ```

    * ğŸ”‘ We check if the `strength` and `hitpoints` are both numbers.

    ```js
    expect(yogi.strength).toEqual(expect.any(Number));
    expect(yogi.hitpoints).toEqual(expect.any(Number));
    ```
    
    * ğŸ”‘ Finally, we check if the `hitpoints` is greater than the `strength`.

    ```js
    expect(yogi.hitpoints).toBeGreaterThan(yogi.strength)
    ```

    * ğŸ”‘ For the bonus, we created a test that will check if the character is alive or not using the `isAlive()` method.

    ```js
    test('checks if character is alive or not', () => {
      const yogi = new Character("Dhalsim", 20, 65);
      expect(yogi.isAlive()).toBeTruthy();
      yogi.hitpoints = 0;
      expect(yogi.isAlive()).toBeFalsy();
    });    
    ```

* Ask the class the following questions (â˜ï¸) and call on students for the answers (ğŸ™‹):

    * â˜ï¸ What are the pros and cons of TDD?

    * ğŸ™‹ By writing tests first, we can define the requirements our application should have ahead of time so we know to what to focus on. We're also more sure that each piece piece of functionality works before moving on to the next.

    * ğŸ™‹ But building applications can take longer if we need to write a lot of tests first. It can also be difficult to write tests for a problem that we're uncertain how to solve right away.

    * â˜ï¸ What can you do if you don't completely understanding this?

    * ğŸ™‹ We can refer to Lesson 1 and 2, read [the Jest documentation](https://jestjs.io/docs/en/using-matchers), and stick around for office hours to ask for help.

* Answer any questions before proceeding to the next activity.


### 12. Recap & Promote Additional Resources (5 min)

* Ask the class the following questions (â˜ï¸) and call on students for the answers (ğŸ™‹):

    * â˜ï¸ What do you think you absolutely need to know to succeed at the challenge?

    * ğŸ™‹ You will need to know ES6 Classes and understand how to read the test outputs in order to fix the code to make them pass.

    * â˜ï¸ What do you think is okay to not completely understand?

    * ğŸ™‹ All of it! The field of web development is very wide and rapidly evolving. Unless you choose to specialize, it is not necessary to know any one area completely to be successful. 

    * â˜ï¸ Why is it important to do as much of the lesson material prior to class as possible?

    * ğŸ™‹ It's important both to be fully prepared to start the challenge and because it will prepare you for your future career as a web developer. We cover a lot of material in the boot camp. Lessons are intentionally designed to give each topic an optimal amount of depth and scope so that you have a solid foundation to build upon in future lessons. The skills you learn in the lessons are cutting-edge, real-world skills that you will use in your career as a full-stack web developer.

* Direct students to the additional resources available to them:

    * Reflection and Retrieval

    * Career Connection

    * Dessert Menu

### 13. Introduce Upcoming Challenge (5 min)

* Navigate to `01-Class-Content/11-Express/02-Challenge/Main/` in your command line and run `node server.js` to demonstrate the following:

    * This upcoming challenge is to create a Note Taker application that can be used to write and save notes. 
    
    * This application will use an Express.js backend and save and retrieve note data from a JSON file.

    * I can add a note and it will show up on the left-hand column with all the other existing notes. 

* Ask the class the following questions (â˜ï¸) and call on students for the answers (ğŸ™‹):

    * â˜ï¸ What are we learning?

    * ğŸ™‹ We are learning to use Express.js for our back-end. We are also deploying our application to Heroku.

    * â˜ï¸ How does this project build off or extend previously learned material?

    * ğŸ™‹ We are continuing to build on our knowledge of Node.js and API routes. We are continuing to use ES6.

    * â˜ï¸ How does this project relate to your career goals?

    * ğŸ™‹ Express.js is the most widely used Node.js server framework. It will allow us to quickly and easily establish our API routes and associated HTTP request methods. 

* Answer any questions before proceeding to the next activity.

### 14. End

How did todayâ€™s lesson go? Your feedback is important. Please take 5 minutes to complete [this anonymous survey](https://forms.gle/3LozVjherGH83aG17).

---
Â© 2021 Trilogy Education Services, LLC, a 2U, Inc. brand.  Confidential and Proprietary.  All Rights Reserved.